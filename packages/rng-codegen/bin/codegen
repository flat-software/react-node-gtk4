#!/bin/sh
set -e

# Resolve the renderer package directory once so we can prefix all paths.
DEST_DIR="$(cd "$(dirname "$0")/../../rng-renderer/src/generated" && pwd)"

# Clean up the generated files.
rm -rf "${DEST_DIR}"

# Generate the GIR types.
yarn codegen:girs
rm -f "${DEST_DIR}"/girs/*-import.js*

# Generate the Widget types.
yarn codegen:widgets

# Format the generated files.
yarn prettier --write "${DEST_DIR}/**/*.{ts,tsx,js}" --ignore-path .prettierignore
